#!/bin/bash

n_cores=8
echo "Building with $n_cores cores"

make -j${n_cores} 2>&1 | 
  # Suppress the ptxas memory warning as this is a known issue from cufftdx that I can't change.
  awk '!/ptxas warning : Program uses 32-bit/{print $0}' |
    # Suppress warnings that ignore .minctapersm and .maxntid. These pop up for 3d kernels that are larger than 2048 which should not be compiled. Righnt now, limiting to 1024 via a runtime assert in ::ValidateDimensions
    # FIXME This includes uncessary code and should be removed.
    awk '!/ptxas warning : Value of threads per SM/{print $0}'